#!/usr/local/bin/node
const FS=require('fs');const PATH=require('path');const BABEL=require('babel-core');minify=(a)=>{var b=FS.readFileSync(a,'utf-8');minJS=BABEL.transform(b,{babelrc:false,comments:false,compact:false,minified:true,code:true,presets:['es2016'],plugins:['minify-mangle-names','minify-simplify','transform-remove-console']}).code;var c=PATH.dirname(a)+'/dist/';var d=PATH.basename(a).replace('.js','.min.js');try{FS.mkdirSync(c)}catch(a){}FS.writeFileSync(c+'/'+d,minJS,'utf-8'),void 0};var watchPath=process.argv[2];!watchPath&&(void 0,process.exit(1)),void 0,FS.watch(watchPath,{recursive:true},(a,b)=>{!b.endsWith('.js')||PATH.dirname(b).endsWith('/dist')||minify(watchPath+b)});